(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{5149:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var n=r(5155),i=r(2115);let l=[],o=[],s=0,a=new Set;function c(){let e={active:o.length,queued:l.length,activeList:o.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}}),queuedList:l.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}})};a.forEach(t=>t(e))}function u(){if(0!==o.length)return o.reduce((e,t)=>t.priority<e.priority?t:e,o[0])}let d=[];function h(e){let{src:t,poster:r,wrapperStyle:h,label:f,playOnHover:m=!1,fetchThresholdPct:p=50,maxFetched:x=7,onClickVideo:g}=e,v=(0,i.useRef)("undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)).current,y=(0,i.useRef)(null),w=(0,i.useRef)(null),b=(0,i.useRef)(!1),j=(0,i.useRef)(null),N=(0,i.useRef)(null),[k,E]=(0,i.useState)(!1),[S,R]=(0,i.useState)(0),[_,L]=(0,i.useState)(null),[M,C]=(0,i.useState)(!1),[F,A]=(0,i.useState)(0),[z,T]=(0,i.useState)(0),[D,H]=(0,i.useState)([]),[I,P]=(0,i.useState)([]),O=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;return e=e=>{let{active:t,queued:r,activeList:n,queuedList:i}=e;A(t),T(r),H(n),P(i)},a.add(e),e({active:o.length,queued:l.length,activeList:o.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}}),queuedList:l.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}})}),()=>{a.delete(e)}},[]),(0,i.useEffect)(()=>{let e=y.current;if(!e)return;let t={threshold:Array.from({length:21},(e,t)=>t/20)};if(p<0){let e=Math.abs(p);t.rootMargin="".concat(e,"% 0% ").concat(e,"% 0%")}let r=new IntersectionObserver(e=>{let[t]=e,r=100*t.intersectionRatio;p<0?E(t.isIntersecting):E(r>=p)},t);return r.observe(e),()=>r.disconnect()},[p]);let U=()=>{let e=y.current;if(!e)return 0;let t=e.getBoundingClientRect();return Math.floor((1-Math.min(1,Math.abs(t.top+t.height/2-window.innerHeight/2)/(window.innerHeight/2+t.height/2)))*1e3)},V=(0,i.useCallback)(()=>{if(k&&!b.current&&!N.current&&!o.some(e=>e.id===v)&&!l.find(e=>e.id===v)){let e=new AbortController;O.current=e;let r=async()=>{try{let r=await fetch(t,{signal:e.signal});if(!r.body)throw Error("No response body");let n=Number(r.headers.get("content-length"))||0,i=r.body.getReader(),l=0,o=[];for(;;){let{done:e,value:t}=await i.read();if(e)break;t&&(o.push(t),l+=t.length,n&&R(Math.round(l/n*100)))}let s=r.headers.get("content-type")||"video/mp4",a=new Blob(o,{type:s}),c=URL.createObjectURL(a);j.current=c,L(c),N.current=c,R(100),C(!0),b.current=!0}catch(e){e instanceof DOMException&&e.name}},n=void 0!==f?String(f):t.split("/").pop()||v;!function(e){let t=o.find(t=>t.id===e.id);if(t){t.priority=e.priority,c();return}let r=l.findIndex(t=>t.id===e.id);r>=0?(l[r].priority=e.priority,l[r].name=e.name):l.push(e),l.sort((e,t)=>t.priority-e.priority);let n=l[0],i=u();n&&i&&n.priority>i.priority+100&&i.controller.abort(),c(),function e(){for(;o.length<2&&l.length>0;){let t=l.shift();o.push(t),c(),Promise.resolve(t.start()).catch(e=>{}).finally(()=>{o=o.filter(e=>e.id!==t.id),c(),e()})}}()}({id:v,name:n,start:r,priority:U()+ ++s,controller:e})}},[k,v,f,t]);return(0,i.useEffect)(()=>{if(!k)return;let e=0,t=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{!function(e,t){let r=o.find(t=>t.id===e);if(r){r.priority=t,c();return}let n=l.find(t=>t.id===e);if(n){n.priority=t,l.sort((e,t)=>t.priority-e.priority);let r=l[0],i=u();r&&i&&r.id===e&&r.priority>i.priority+100&&i.controller.abort(),c()}}(v,U()+ ++s),b.current||N.current||V()})};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),t(),()=>{cancelAnimationFrame(e),window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[k,v,V]),(0,i.useEffect)(()=>{if(!k){let e=l.length;(l=l.filter(e=>e.id!==v)).length!==e&&c(),R(0),C(!1),b.current=!1,w.current&&(w.current.removeAttribute("src"),w.current.load()),j.current&&(URL.revokeObjectURL(j.current),j.current=null),L(null),N.current=null,O.current&&(O.current.abort(),O.current=null);return}return V(),()=>{O.current&&(O.current.abort(),O.current=null)}},[k,t,v,V]),(0,i.useEffect)(()=>{let e=w.current;if(e)if(k){if(d.length>=x){let e=d.shift();e&&(e.pause(),e.removeAttribute("src"),e.load())}d.includes(e)||d.push(e)}else e.pause(),e.removeAttribute("src"),e.load(),d=d.filter(t=>t!==e)},[k,x]),(0,n.jsx)("div",{ref:y,style:{...h,position:"relative",backgroundImage:r?"url(".concat(r,")"):void 0,backgroundSize:"cover",backgroundPosition:"center"},children:k?(0,n.jsxs)(n.Fragment,{children:[_?(0,n.jsx)("video",{ref:w,src:_,muted:!0,playsInline:!0,loop:!0,preload:"auto",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onClick:()=>null==g?void 0:g(w.current),onMouseEnter:()=>{var e;return m&&M&&(null==(e=w.current)?void 0:e.play())},onMouseLeave:()=>{var e;return null==(e=w.current)?void 0:e.pause()}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"z-10 absolute top-0 left-0 flex items-center justify-center w-full h-full text-white text-xs",style:{background:"rgba(0,0,0,0.3)"},children:"loading ".concat(S,"%")}),(0,n.jsx)("div",{className:"z-0 absolute top-0 left-0 w-full h-full pointer-events-none transition duration-200",style:{background:"rgba(128,128,128,".concat(Math.max(0,.3-S/100*.3),")"),backdropFilter:"blur(".concat(Math.max(0,20-S/100*20),"px)")}})]}),!1]}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",color:"#fff",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.4)"},children:"placeholder ".concat(f)})})}function f(e){let{video:t,onClickVideo:r,style:i}=e;return(0,n.jsxs)("div",{style:{position:"relative",overflow:"hidden",...i},children:[(0,n.jsx)(h,{src:t.src,poster:t.poster,wrapperStyle:{width:"100%",height:"100%"},playOnHover:!0,fetchThresholdPct:-100,maxFetched:7,onClickVideo:r}),t.title&&(0,n.jsx)("div",{className:"absolute bottom-0 w-full bg-black/50 text-white/80 text-xs px-1 py-0.5 text-center",children:t.title})]})}function m(e){let{videos:t,precomputedDimensions:r,onClickVideo:l,spacing:o=12,onReady:s}=e;return(0,i.useEffect)(()=>{s&&(s(),console.log("On READY PORTRAIT"))},[s]),(0,n.jsx)("div",{className:"flex flex-col",style:{gap:o},children:t.map((e,t)=>{let i=null==r?void 0:r[t],o=i?i.width/i.height:16/9;return(0,n.jsx)(f,{video:e,onClickVideo:l,style:{width:"100%",aspectRatio:o}},t)})})}var p=r(7920);function x(e){let{videos:t,precomputedDimensions:r,targetRowHeight:l=620,boxSpacing:o=20,onClickVideo:s,onReady:a,className:c}=e,u=(0,i.useRef)(null),[d,f]=(0,i.useState)(0),[m,x]=(0,i.useState)([]),[g,v]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!u.current)return;let e=new ResizeObserver(e=>{for(let t of e)f(t.contentRect.width)});return e.observe(u.current),()=>e.disconnect()},[]),(0,i.useEffect)(()=>{if(null==r?void 0:r.length){let e=t.map((e,t)=>({v:e,d:r[t]})).filter(e=>e.d&&Number.isFinite(e.d.width)&&Number.isFinite(e.d.height));v(e.map(e=>e.v)),x(e.map(e=>e.d))}else v([]),x([])},[t,r]),(0,i.useEffect)(()=>{if(null==r?void 0:r.length)return;let e=!0;return async function(){let r=performance.now(),n=await Promise.allSettled(t.map(e=>new Promise((t,r)=>{if(!e.poster)return r("No poster");let n=new Image;n.onload=()=>t({width:n.width,height:n.height}),n.onerror=r,n.src=e.poster}))),i=performance.now();if(console.log("â³ Measuring posters took ".concat((i-r).toFixed(2)," ms")),!e)return;let l=[],o=[];n.forEach((e,r)=>{"fulfilled"===e.status&&Number.isFinite(e.value.width)&&Number.isFinite(e.value.height)?(l.push(e.value),o.push(t[r])):console.warn(n[r])}),x(l),v(o)}(),()=>{e=!1}},[t,r]);let y=Math.max(1,Math.floor(d)),w=performance.now(),[b]=(0,p.A)({layoutInput:m,configuration:{targetRowHeight:l,boxSpacing:o,containerWidth:y,containerPadding:{top:0,right:0,bottom:0,left:0}},dependencies:[m,l,o,y]}),j=performance.now();console.log("\uD83D\uDCD0 Layout calculation took ".concat((j-w).toFixed(2)," ms"));let N=y>1&&m.length>0;return(0,i.useEffect)(()=>{N&&a&&a()},[N,a]),(0,n.jsx)("div",{style:{height:N?b.containerHeight:void 0},className:c,children:(0,n.jsx)("div",{ref:u,style:{position:"relative"},children:N&&b.boxes.map((e,t)=>(0,n.jsxs)("div",{style:{position:"absolute",top:e.top,left:e.left,width:e.width,height:e.height,cursor:"pointer",overflow:"hidden",contentVisibility:"auto",contain:"layout style paint"},children:[(0,n.jsx)(h,{src:g[t].src,poster:g[t].poster,label:t,wrapperStyle:{width:"100%",height:"100%"},playOnHover:!0,fetchThresholdPct:-100,maxFetched:7,onClickVideo:s}),g[t].title&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"absolute bottom-0 w-full bg-black/50 text-white/80 text-xs px-1 py-0.5 text-center",children:g[t].title})})]},t))})})}var g=r(7211),v=r.n(g);function y(e){let{videos:t,precomputedDimensions:r,onReady:l}=e,[o,s]=(0,i.useState)(!0),[a,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)(400),[p,g]=(0,i.useState)(20);(0,i.useEffect)(()=>{let e=window.matchMedia("(min-width: 768px)"),t=()=>{var e,t;let r=null!=(t=null==(e=window.visualViewport)?void 0:e.height)?t:window.innerHeight;s(1.3*window.innerWidth>r),f(.55*r),console.log("setRowHeight",.55*r)},r=()=>{g(e.matches?20:12)};return t(),r(),e.addEventListener("change",r),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),e.removeEventListener("change",r)}},[]);let y=(0,i.useCallback)(()=>{u&&(u.style.opacity="1"),c(null),d(null)},[u]);return(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&y()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y]),(0,n.jsxs)("div",{children:[o?(0,n.jsx)(x,{videos:t,precomputedDimensions:r,targetRowHeight:h,boxSpacing:p,onClickVideo:e=>{if(console.log(e),a)return;let t=e.currentSrc||e.src,r=e.getAttribute("poster")||void 0;e.style.opacity="0",d(e),c({src:t,poster:r,currentTime:e.currentTime})},onReady:l}):(0,n.jsx)(m,{videos:t,precomputedDimensions:r,spacing:p,onReady:l}),a&&(0,n.jsx)("div",{className:"".concat(v().overlay),onClick:y,children:(0,n.jsx)("div",{className:"flex items-center justify-center",onClick:e=>e.stopPropagation(),children:(0,n.jsx)("video",{src:a.src,poster:a.poster,controls:!0,autoPlay:!0,loop:!0,muted:!1,style:{maxWidth:"90vw",maxHeight:"80vh",minWidth:"60vw",minHeight:"40vh",width:"auto",height:"auto",objectFit:"contain"},onLoadedMetadata:e=>{e.currentTarget.currentTime=a.currentTime}})})})]})}var w=r(8455);function b(e){let{children:t,trigger:r=!0}=e,[l,o]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(r){let e=requestAnimationFrame(()=>o(!0));return()=>cancelAnimationFrame(e)}o(!1)},[r]),(0,n.jsx)("div",{className:"flex flex-1 transition-opacity duration-[400ms] ".concat(l?"opacity-100":"opacity-0"),children:t})}function j(e){let{title:t,videos:r,precomputedDimensions:l}=e,[o,s]=(0,i.useState)(!1);return(0,n.jsx)(b,{trigger:o,children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("main",{className:"md:content",children:[(0,n.jsx)("div",{className:"flex flex-col justify-center items-center py-10",children:(0,n.jsx)("div",{className:"font-medium text-xl",children:t})}),(0,n.jsx)(y,{videos:r,precomputedDimensions:l,onReady:()=>s(!0)})]}),(0,n.jsx)(w.default,{})]})})}},7211:e=>{e.exports={toggle:"Gallery_toggle__hkqzC",galleryRows:"Gallery_galleryRows__BkK15",column:"Gallery_column__LNN0D",videoWrapper:"Gallery_videoWrapper__de23j",galleryVertical:"Gallery_galleryVertical__90dRk",overlay:"Gallery_overlay__s59Pr",zoomVideo:"Gallery_zoomVideo__B6anM"}},8455:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(5155),i=r(2619),l=r.n(i),o=r(2115),s=r(898);let a=[{name:"instagram",href:"https://instagram.com/jn3oo8",icon:s.ao$,aria:"Instagram"},{name:"github",href:"https://github.com/jn3008/",icon:s.hL4,aria:"GitHub"},{name:"twitter",href:"https://x.com/jn3008",icon:s.feZ,aria:"Twitter (X)"},{name:"tumblr",href:"https://jn3008.tumblr.com/",icon:s.kUm,aria:"Tumblr"},{name:"mastodon",href:"https://mastodon.social/@jn3008",icon:s.hHC,aria:"Mastodon",me:!0},{name:"email",href:"mailto:contact@jn3008.com",icon:s.maD,aria:"Email"}];function c(e){let{className:t=""}=e,r="group inline-flex items-center justify-center p-1 rounded-lg    focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/60    transition-colors duration-300 ease-in-out",i=(0,n.jsx)(l(),{href:"/about",className:"underline-offset-4 hover:underline",children:(0,n.jsx)("div",{children:"ABOUT"})}),s=(0,n.jsx)(l(),{href:"/contact",className:"underline-offset-4 hover:underline",children:(0,n.jsx)("div",{children:"CONTACT"})}),[c,u]=(0,o.useState)(a.map(()=>({x:0,y:0,rot:0})));(0,o.useEffect)(()=>{u(a.map(()=>({x:40*Math.random()-20,y:20*Math.random()-10,rot:30*Math.random()-15})))},[]);let d=(0,n.jsx)("div",{className:"relative w-full h-full grid grid-cols-3 grid-rows-2",children:a.map((e,t)=>{let{name:i,href:l,icon:o,aria:s,me:a}=e,{x:u,y:d,rot:h}=c[t];return(0,n.jsx)("a",{href:l,target:"_blank","aria-label":s,rel:"".concat(a?"me ":"","noopener noreferrer"),className:"".concat(r," inline-flex items-center justify-center justify-self-center self-center"),style:{transform:"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg)")},children:(0,n.jsx)(o,{size:"1.8em",className:"text-current transition-transform duration-300 group-hover:scale-125"})},i)})}),h=(0,n.jsx)("div",{className:"relative w-full h-full grid grid-cols-6 grid-rows-1",children:a.map((e,t)=>{let{name:i,href:l,icon:o,aria:s,me:a}=e,{x:u,y:d,rot:h}=c[t];return(0,n.jsx)("a",{href:l,target:"_blank","aria-label":s,rel:"".concat(a?"me ":"","noopener noreferrer"),className:"".concat(r," inline-flex items-center justify-center justify-self-center self-center"),style:{transform:"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg)")},children:(0,n.jsx)(o,{size:"1.8em",className:"text-current transition-transform duration-300 group-hover:scale-125"})},i)})});return(0,n.jsxs)("footer",{children:[(0,n.jsxs)("div",{className:"hidden md:flex md:content-text mt-16 pb-10 px-0 flex-wrap\n          justify-between gap-2 text-primary font-medium items-stretch\n          ".concat(t),children:[(0,n.jsxs)("div",{className:"self-start text-left text-xs my-auto",children:[i,s]}),(0,n.jsx)("div",{className:"min-h-[60px] flex-1 min-w-[180px] max-w-[400px]",children:h}),(0,n.jsxs)("div",{className:"self-start text-right text-xs whitespace-nowrap my-auto",children:[(0,n.jsx)("p",{children:"jn3008"}),(0,n.jsx)("div",{className:"whitespace-nowrap",children:"All rights reserved."})]})]}),(0,n.jsx)("div",{className:"flex md:hidden flex-col mt-2 pb-4 px-4\n          items-center justify-between gap-2 text-primary font-medium\n          ".concat(t),children:(0,n.jsxs)("div",{className:"flex flex-wrap w-full justify-between items-stretch",children:[(0,n.jsxs)("div",{className:"flex my-auto flex-col gap-1 self-start text-left text-xs",children:[i,s,(0,n.jsx)("p",{children:"jn3008"}),(0,n.jsx)("p",{className:"whitespace-nowrap",children:"All rights reserved."})]}),(0,n.jsx)("div",{className:"min-h-[120px] flex-1 min-w-[180px] max-w-[400px]",children:d})]})})]})}},9374:(e,t,r)=>{Promise.resolve().then(r.bind(r,5149))}}]);
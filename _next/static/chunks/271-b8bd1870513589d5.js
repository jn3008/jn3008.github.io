(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{1661:t=>{t.exports={toggle:"Gallery_toggle__hkqzC",galleryRows:"Gallery_galleryRows__BkK15",column:"Gallery_column__LNN0D",videoWrapper:"Gallery_videoWrapper__de23j",galleryVertical:"Gallery_galleryVertical__90dRk",overlay:"Gallery_overlay__s59Pr",zoomVideo:"Gallery_zoomVideo__B6anM"}},4271:(t,e,i)=>{"use strict";i.d(e,{default:()=>v});var n=i(5155),r=i(2115),o=i(8414),a=i.n(o);let s={containerHeight:0,widowCount:0,boxes:[]},l=[],c=[],h=0,u=new Set;function d(){let t={active:c.length,queued:l.length,activeList:c.map(t=>{let{id:e,name:i,priority:n}=t;return{id:e,name:i,priority:n}}),queuedList:l.map(t=>{let{id:e,name:i,priority:n}=t;return{id:e,name:i,priority:n}})};u.forEach(e=>e(t))}function g(){if(0!==c.length)return c.reduce((t,e)=>e.priority<t.priority?e:t,c[0])}let p=[];function f(t){let{src:e,poster:i,wrapperStyle:o,label:a,playOnHover:s=!1,fetchThresholdPct:f=50,maxFetched:w=7,onClickVideo:m}=t,y=(0,r.useRef)("undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)).current,v=(0,r.useRef)(null),b=(0,r.useRef)(null),R=(0,r.useRef)(!1),x=(0,r.useRef)(null),_=(0,r.useRef)(null),[H,S]=(0,r.useState)(!1),[L,j]=(0,r.useState)(0),[k,C]=(0,r.useState)(null),[E,N]=(0,r.useState)(!1),[M,P]=(0,r.useState)(0),[I,F]=(0,r.useState)(0),[A,z]=(0,r.useState)([]),[O,T]=(0,r.useState)([]),W=(0,r.useRef)(null);(0,r.useEffect)(()=>{var t;return t=t=>{let{active:e,queued:i,activeList:n,queuedList:r}=t;P(e),F(i),z(n),T(r)},u.add(t),t({active:c.length,queued:l.length,activeList:c.map(t=>{let{id:e,name:i,priority:n}=t;return{id:e,name:i,priority:n}}),queuedList:l.map(t=>{let{id:e,name:i,priority:n}=t;return{id:e,name:i,priority:n}})}),()=>{u.delete(t)}},[]),(0,r.useEffect)(()=>{let t=v.current;if(!t)return;let e={threshold:Array.from({length:21},(t,e)=>e/20)};if(f<0){let t=Math.abs(f);e.rootMargin="".concat(t,"% 0% ").concat(t,"% 0%")}let i=new IntersectionObserver(t=>{let[e]=t,i=100*e.intersectionRatio;f<0?S(e.isIntersecting):S(i>=f)},e);return i.observe(t),()=>i.disconnect()},[f]);let B=()=>{let t=v.current;if(!t)return 0;let e=t.getBoundingClientRect();return Math.floor((1-Math.min(1,Math.abs(e.top+e.height/2-window.innerHeight/2)/(window.innerHeight/2+e.height/2)))*1e3)},D=(0,r.useCallback)(()=>{if(H&&!R.current&&!_.current&&!c.some(t=>t.id===y)&&!l.find(t=>t.id===y)){let t=new AbortController;W.current=t;let i=async()=>{try{let i=await fetch(e,{signal:t.signal});if(!i.body)throw Error("No response body");let n=Number(i.headers.get("content-length"))||0,r=i.body.getReader(),o=0,a=[];for(;;){let{done:t,value:e}=await r.read();if(t)break;e&&(a.push(e),o+=e.length,n&&j(Math.round(o/n*100)))}let s=i.headers.get("content-type")||"video/mp4",l=new Blob(a,{type:s}),c=URL.createObjectURL(l);x.current=c,C(c),_.current=c,j(100),N(!0),R.current=!0}catch(t){t instanceof DOMException&&t.name}},n=void 0!==a?String(a):e.split("/").pop()||y;!function(t){let e=c.find(e=>e.id===t.id);if(e){e.priority=t.priority,d();return}let i=l.findIndex(e=>e.id===t.id);i>=0?(l[i].priority=t.priority,l[i].name=t.name):l.push(t),l.sort((t,e)=>e.priority-t.priority);let n=l[0],r=g();n&&r&&n.priority>r.priority+100&&r.controller.abort(),d(),function t(){for(;c.length<2&&l.length>0;){let e=l.shift();c.push(e),d(),Promise.resolve(e.start()).catch(t=>{}).finally(()=>{c=c.filter(t=>t.id!==e.id),d(),t()})}}()}({id:y,name:n,start:i,priority:B()+ ++h,controller:t})}},[H,y,a,e]);return(0,r.useEffect)(()=>{if(!H)return;let t=0,e=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{!function(t,e){let i=c.find(e=>e.id===t);if(i){i.priority=e,d();return}let n=l.find(e=>e.id===t);if(n){n.priority=e,l.sort((t,e)=>e.priority-t.priority);let i=l[0],r=g();i&&r&&i.id===t&&i.priority>r.priority+100&&r.controller.abort(),d()}}(y,B()+ ++h),R.current||_.current||D()})};return window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),e(),()=>{cancelAnimationFrame(t),window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[H,y,D]),(0,r.useEffect)(()=>{if(!H){let t=l.length;(l=l.filter(t=>t.id!==y)).length!==t&&d(),j(0),N(!1),R.current=!1,b.current&&(b.current.removeAttribute("src"),b.current.load()),x.current&&(URL.revokeObjectURL(x.current),x.current=null),C(null),_.current=null,W.current&&(W.current.abort(),W.current=null);return}return D(),()=>{W.current&&(W.current.abort(),W.current=null)}},[H,e,y,D]),(0,r.useEffect)(()=>{let t=b.current;if(t)if(H){if(p.length>=w){let t=p.shift();t&&(t.pause(),t.removeAttribute("src"),t.load())}p.includes(t)||p.push(t)}else t.pause(),t.removeAttribute("src"),t.load(),p=p.filter(e=>e!==t)},[H,w]),(0,n.jsx)("div",{ref:v,style:{...o,position:"relative",backgroundImage:i?"url(".concat(i,")"):void 0,backgroundSize:"cover",backgroundPosition:"center"},children:H?(0,n.jsxs)(n.Fragment,{children:[k?(0,n.jsx)("video",{ref:b,src:k,muted:!0,playsInline:!0,loop:!0,preload:"auto",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onClick:()=>null==m?void 0:m(b.current),onMouseEnter:()=>{var t;return s&&E&&(null==(t=b.current)?void 0:t.play())},onMouseLeave:()=>{var t;return null==(t=b.current)?void 0:t.pause()}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"z-10 absolute top-0 left-0 flex items-center justify-center w-full h-full text-white text-xs",style:{background:"rgba(0,0,0,0.3)"},children:"loading ".concat(L,"%")}),(0,n.jsx)("div",{className:"z-0 absolute top-0 left-0 w-full h-full pointer-events-none transition duration-200",style:{background:"rgba(128,128,128,".concat(Math.max(0,.3-L/100*.3),")"),backdropFilter:"blur(".concat(Math.max(0,20-L/100*20),"px)")}})]}),!1]}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",color:"#fff",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.4)"},children:"placeholder ".concat(a)})})}function w(t){let{videos:e,precomputedDimensions:i,targetRowHeight:o=620,boxSpacing:l=20,onClickVideo:c,className:h}=t,u=(0,r.useRef)(null),[d,g]=(0,r.useState)(0),[p,w]=(0,r.useState)([]),[m,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!u.current)return;let t=new ResizeObserver(t=>{for(let e of t)g(e.contentRect.width)});return t.observe(u.current),()=>t.disconnect()},[]),(0,r.useEffect)(()=>{if(null==i?void 0:i.length){let t=e.map((t,e)=>({v:t,d:i[e]})).filter(t=>t.d&&Number.isFinite(t.d.width)&&Number.isFinite(t.d.height));y(t.map(t=>t.v)),w(t.map(t=>t.d))}else y([]),w([])},[e,i]),(0,r.useEffect)(()=>{if(null==i?void 0:i.length)return;let t=!0;return async function(){let i=performance.now(),n=await Promise.allSettled(e.map(t=>new Promise((e,i)=>{if(!t.poster)return i("No poster");let n=new Image;n.onload=()=>e({width:n.width,height:n.height}),n.onerror=i,n.src=t.poster}))),r=performance.now();if(console.log("⏳ Measuring posters took ".concat((r-i).toFixed(2)," ms")),!t)return;let o=[],a=[];n.forEach((t,i)=>{"fulfilled"===t.status&&Number.isFinite(t.value.width)&&Number.isFinite(t.value.height)?(o.push(t.value),a.push(e[i])):console.warn(n[i])}),w(o),y(a)}(),()=>{t=!1}},[e,i]);let v=Math.max(1,Math.floor(d)),b=performance.now(),[R]=(({layoutInput:t,configuration:e,dependencies:i=[]})=>{let[n,o]=(0,r.useState)(s),[l,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{o(a()(t,e))},[t,...i]),(0,r.useEffect)(()=>{n&&!l&&c(!0)},[n]),[n,l]})({layoutInput:p,configuration:{targetRowHeight:o,boxSpacing:l,containerWidth:v,containerPadding:{top:0,right:0,bottom:0,left:0}},dependencies:[p,o,l,v]}),x=performance.now();console.log("\uD83D\uDCD0 Layout calculation took ".concat((x-b).toFixed(2)," ms"));let _=v>1&&p.length>0;return(0,n.jsx)("div",{style:{height:_?R.containerHeight:void 0},className:h,children:(0,n.jsx)("div",{ref:u,style:{position:"relative"},children:_&&R.boxes.map((t,e)=>(0,n.jsxs)("div",{style:{position:"absolute",top:t.top,left:t.left,width:t.width,height:t.height,cursor:"pointer",overflow:"hidden",contentVisibility:"auto",contain:"layout style paint"},children:[(0,n.jsx)(f,{src:m[e].src,poster:m[e].poster,label:e,wrapperStyle:{width:"100%",height:"100%"},playOnHover:!0,fetchThresholdPct:-100,maxFetched:7,onClickVideo:c}),m[e].title&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"absolute bottom-0 w-full bg-black/50 text-white/80 text-xs px-1 py-0.5 text-center",children:m[e].title})})]},e))})})}var m=i(1661),y=i.n(m);function v(t){let{videos:e,precomputedDimensions:i}=t,[o,a]=(0,r.useState)(1),[s,l]=(0,r.useState)(!0),[c,h]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[g,p]=(0,r.useState)(400),[f,m]=(0,r.useState)(20);(0,r.useEffect)(()=>{let t=window.matchMedia("(min-width: 768px)"),e=()=>{l(window.innerWidth>window.innerHeight),p(.55*window.innerHeight)},i=()=>{m(t.matches?20:12)};return e(),i(),t.addEventListener("change",i),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),t.removeEventListener("change",i)}},[]);let v=(0,r.useCallback)(()=>{u&&(u.style.opacity="1"),h(null),d(null)},[u]);return(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&v()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[v]),(0,n.jsxs)("div",{children:[s?(0,n.jsx)(w,{videos:e,precomputedDimensions:i,targetRowHeight:g,boxSpacing:f,onClickVideo:t=>{if(console.log(t),c)return;let e=t.currentSrc||t.src,i=t.getAttribute("poster")||void 0;t.style.opacity="0",d(t),h({src:e,poster:i,currentTime:t.currentTime})}}):(0,n.jsx)(w,{videos:e,precomputedDimensions:i,targetRowHeight:.8*window.innerHeight,boxSpacing:f}),c&&(0,n.jsx)("div",{className:"".concat(y().overlay),onClick:v,children:(0,n.jsx)("div",{className:"flex items-center justify-center",onClick:t=>t.stopPropagation(),children:(0,n.jsx)("video",{src:c.src,poster:c.poster,controls:!0,autoPlay:!0,loop:!0,muted:!1,style:{maxWidth:"90vw",maxHeight:"80vh",minWidth:"60vw",minHeight:"40vh",width:"auto",height:"auto",objectFit:"contain"},onLoadedMetadata:t=>{t.currentTarget.currentTime=c.currentTime}})})})]})}},8414:(t,e,i)=>{"use strict";var n=i(9342);function r(t,e){var i;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(i=!0),new n({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:i,widowLayoutStyle:t.widowLayoutStyle})}function o(t,e,i){return e._rows.push(i),e._layoutItems=e._layoutItems.concat(i.getItems()),e._containerHeight+=i.height+t.boxSpacing.vertical,i.items}t.exports=function(t,e){var i,n,a,s,l,c,h={},u={},d={},g={};return d.top=isNaN(parseFloat((h=Object.assign({containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:1/0,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},e=e||{})).containerPadding.top))?h.containerPadding:h.containerPadding.top,d.right=isNaN(parseFloat(h.containerPadding.right))?h.containerPadding:h.containerPadding.right,d.bottom=isNaN(parseFloat(h.containerPadding.bottom))?h.containerPadding:h.containerPadding.bottom,d.left=isNaN(parseFloat(h.containerPadding.left))?h.containerPadding:h.containerPadding.left,g.horizontal=isNaN(parseFloat(h.boxSpacing.horizontal))?h.boxSpacing:h.boxSpacing.horizontal,g.vertical=isNaN(parseFloat(h.boxSpacing.vertical))?h.boxSpacing:h.boxSpacing.vertical,h.containerPadding=d,h.boxSpacing=g,u._layoutItems=[],u._awakeItems=[],u._inViewportItems=[],u._leadingOrphans=[],u._trailingOrphans=[],u._containerHeight=h.containerPadding.top,u._rows=[],u._orphans=[],h._widowCount=0,i=h,n=t.map(function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}}),c=[],i.forceAspectRatio&&n.forEach(function(t){t.forcedAspectRatio=!0,t.aspectRatio=i.forceAspectRatio}),n.some(function(t,e){if(isNaN(t.aspectRatio))throw Error("Item "+e+" has an invalid aspect ratio");if(s||(s=r(i,u)),a=s.addItem(t),s.isLayoutComplete()){if(c=c.concat(o(i,u,s)),u._rows.length>=i.maxNumRows)return s=null,!0;if(s=r(i,u),!a&&(a=s.addItem(t),s.isLayoutComplete())){if(c=c.concat(o(i,u,s)),u._rows.length>=i.maxNumRows)return s=null,!0;s=r(i,u)}}}),s&&s.getItems().length&&i.showWidows&&(u._rows.length?(l=u._rows[u._rows.length-1].isBreakoutRow?u._rows[u._rows.length-1].targetRowHeight:u._rows[u._rows.length-1].height,s.forceComplete(!1,l)):s.forceComplete(!1),c=c.concat(o(i,u,s)),i._widowCount=s.getItems().length),u._containerHeight=u._containerHeight-i.boxSpacing.vertical,u._containerHeight=u._containerHeight+i.containerPadding.bottom,{containerHeight:u._containerHeight,widowCount:i._widowCount,boxes:u._layoutItems}}},9342:t=>{(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,i,n=this.items.concat(t),r=this.width-(n.length-1)*this.spacing,o=n.reduce(function(t,e){return t+e.aspectRatio},0),a=r/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(r/t.aspectRatio,"justify"),!0):o<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):o>this.maxAspectRatio?0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(r/o,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,Math.abs(o-a)>Math.abs((i=this.items.reduce(function(t,e){return t+e.aspectRatio},0))-e/this.targetRowHeight))?(this.completeLayout(e/i,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(r/o,"justify"),!0):(this.items.push(Object.assign({},t)),this.completeLayout(r/o,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,e){var i,n,r,o,a,s,l=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===e||0>["justify","center","left"].indexOf(e))&&(e="left"),n=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)),t!==n?(this.height=n,i=c/n/(c/t)):(this.height=t,i=1),this.items.forEach(function(t){t.top=this.top,t.width=t.aspectRatio*this.height*i,t.height=this.height,t.left=l,l+=t.width+this.spacing},this),"justify"===e?(l-=this.spacing+this.left,r=(l-this.width)/this.items.length,o=this.items.map(function(t,e){return Math.round((e+1)*r)}),1===this.items.length?(a=this.items[0],a.width-=Math.round(r)):this.items.forEach(function(t,e){e>0?(t.left-=o[e-1],t.width-=o[e]-o[e-1]):t.width-=o[e]})):"center"===e&&(s=(this.width-l)/2,this.items.forEach(function(t){t.left+=s+this.spacing},this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{528:(t,e,i)=>{Promise.resolve().then(i.bind(i,2049)),Promise.resolve().then(i.bind(i,2354))},2049:(t,e,i)=>{"use strict";i.d(e,{default:()=>p});var s=i(5155),n=i(2115),o=i(3264),l=i(7431),a=i(7151);class r{update(t){if(!this.duration)return;this.t+=t;let e=this.t/this.duration;e=(0,a.Rl)(e,2),e=(0,a.z9)(e);let i=this.cube_size*a.Hi,s=new o.kn4().identity();s.premultiply(this.action(e)),s.premultiply(a.jQ),s.premultiply(new o.kn4().makeTranslation(this.start_pos.x,this.start_pos.y,this.start_pos.z)),s.premultiply(new o.kn4().makeScale(i,i,i)),this.object.position.set(0,0,0),this.object.rotation.set(0,0,0),this.object.scale.set(1,1,1),this.object.applyMatrix4(s);let n=new o.Pq0().setFromMatrixScale(s);if(this.object.scale.set(n.x,n.y,n.z),this.points&&this.baseDotPositions){s.decompose(this._pos,this._quat,this._scl),this.points.position.copy(this._pos),this.points.quaternion.copy(this._quat),this.points.scale.set(1,1,1),this.points.position.z+=this.dotZBias;let t=this.baseDotPositions.length/3;for(let e=0;e<t;e++)this._dummy.position.set(this.baseDotPositions[3*e+0]*this._scl.x,this.baseDotPositions[3*e+1]*this._scl.y,this.baseDotPositions[3*e+2]*this._scl.z),this._dummy.rotation.set(0,0,0),this._dummy.scale.set(1,1,1),this._dummy.updateMatrix(),this.points.setMatrixAt(e,this._dummy.matrix);this.points.instanceMatrix.needsUpdate=!0}}getStartPos(){return new o.Pq0().copy(this.start_pos).multiplyScalar(this.cube_size)}getEndPos(){return new o.Pq0().applyMatrix4(this.action(1).premultiply(a.jQ)).add(this.start_pos).multiplyScalar(this.cube_size)}make_new_cube(t,e){if(this.t=0,this.cube_size=(0,a.fG)(1,3),this.mvm=(0,a.fG)(0,10),this.time_offset=(0,a.fG)(0,1),this.duration=.08+.1*((this.cube_size-1)/4),this.points&&(this.points.geometry.dispose(),this.points=null),t){let e=this.cube_size*a.Hi;this.start_pos=t.clone().multiplyScalar(1/Math.max(e,1e-6))}else{let t=(0,a.TC)(Math.floor(.4*this.bg_grid_size)-1);this.start_pos=t}let i=(0,a.Uh)(this.getStartPos()),s=(0,a.Uh)(this.getEndPos());if(e&&e.length>0){for(let t of[i,s])for(let i of e)for(let e of[(0,a.Uh)(i.getStartPos()),(0,a.Uh)(i.getEndPos())])for(let s=-this.cube_size;s<this.cube_size+1;s++)for(let n=-this.cube_size;n<this.cube_size+1;n++)if((0,a.ZZ)(s,n,this.cube_size-1)&&(0,a.ZZ)(s-t.x+e.x,n-t.y+e.y,i.cube_size))return!1}let n=[];for(let t=0;t<=this.cube_size;t++)for(let e=0;e<=this.cube_size;e++)for(let i=0;i<=this.cube_size;i++)Math.min(t,e,i)>0&&Math.max(t,e,i)<this.cube_size||n.push(t/this.cube_size-.5,e/this.cube_size-.5,i/this.cube_size-.5);this.baseDotPositions=new Float32Array(n);let l=n.length/3,r=new o.ZLX(a.PL,a._s,l);for(let t=0;t<l;t++){let e=n[3*t+0],i=n[3*t+1],s=n[3*t+2];this._dummy.position.set(e,i,s),this._dummy.rotation.set(0,0,0),this._dummy.scale.set(1,1,1),this._dummy.updateMatrix(),r.setMatrixAt(t,this._dummy.matrix)}return r.instanceMatrix.needsUpdate=!0,r.instanceMatrix.setUsage(o.Vnu),r.renderOrder=999,r.frustumCulled=!1,this.points=r,this.update(0),!0}action(t){let e=new o.kn4().identity();switch(this.mvm){case 0:e.premultiply(new o.kn4().makeTranslation(-.5,.5,0)),e.premultiply(new o.kn4().makeRotationZ(-(.5*Math.PI)*t)),e.premultiply(new o.kn4().makeTranslation(.5,-.5,0));break;case 1:e.premultiply(new o.kn4().makeTranslation(0,.5,-.5)),e.premultiply(new o.kn4().makeRotationX(.5*Math.PI*t)),e.premultiply(new o.kn4().makeTranslation(0,-.5,.5));break;case 2:e.premultiply(new o.kn4().makeTranslation(.5,.5,0)),e.premultiply(new o.kn4().makeRotationZ(-(.5*Math.PI)*t)),e.premultiply(new o.kn4().makeTranslation(-.5,-.5,0));break;case 3:e.premultiply(new o.kn4().makeTranslation(0,.5,.5)),e.premultiply(new o.kn4().makeRotationX(.5*Math.PI*t)),e.premultiply(new o.kn4().makeTranslation(0,-.5,-.5));break;case 4:e.premultiply(new o.kn4().makeTranslation(-.5,0,.5)),e.premultiply(new o.kn4().makeRotationY(.5*Math.PI*t)),e.premultiply(new o.kn4().makeTranslation(.5,0,-.5));break;case 5:e.premultiply(new o.kn4().makeTranslation(.5,0,-.5)),e.premultiply(new o.kn4().makeRotationY(-(.5*Math.PI)*t)),e.premultiply(new o.kn4().makeTranslation(-.5,0,.5));break;case 6:case 7:e.premultiply(new o.kn4().makeTranslation(.5,0,.5)),e.premultiply(new o.kn4().makeRotationY(.5*Math.PI*t)),e.premultiply(new o.kn4().makeTranslation(-.5,0,-.5));break;case 8:e.premultiply(new o.kn4().makeTranslation(.5,0,0)),e.premultiply(new o.kn4().makeScale(t,1,1)),e.premultiply(new o.kn4().makeTranslation(-.5,0,0));break;case 9:e.premultiply(new o.kn4().makeTranslation(0,0,.5)),e.premultiply(new o.kn4().makeScale(1,1,t)),e.premultiply(new o.kn4().makeTranslation(0,0,-.5));break;case 10:e.premultiply(new o.kn4().makeTranslation(0,.5,0)),e.premultiply(new o.kn4().makeScale(1,t,1)),e.premultiply(new o.kn4().makeTranslation(0,-.5,0))}return e}constructor(t){this.t=0,this.bg_grid_size=5,this.squish=.5,this.dotZBias=.1,this.points=null,this.baseDotPositions=null,this._dummy=new o.B69,this._pos=new o.Pq0,this._quat=new o.PTz,this._scl=new o.Pq0;let e=new o.iNn(1,1,1);this.object=new o.eaF(e,a.EC),this.object.position.set(0,0,0),this.object.userData={cube:this}}}function p(){let t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=t.current,i=new o.Z58,s=new o.qUd(-3,3,3,-3,-100,100);s.position.set(0,0,10),s.lookAt(0,0,0);let n=new l.JeP({antialias:!0,alpha:!0});n.setPixelRatio(Math.min(window.devicePixelRatio,1.5)),n.domElement.style.display="block",n.domElement.style.width="100%",n.domElement.style.height="100%",e.appendChild(n.domElement),(0,a.rL)();let p=null;function m(t){let e=(0,a.UF)(t);e.x=Math.round(e.x),e.y=Math.round(e.y),e.z=Math.round(e.z);let i=(0,a.$p)(e);return i.z=0,i}let h=[];for(let t=-24;t<25;t++)for(let e=-24;e<25;e++)if((0,a.ZZ)(t,e,24)){let i=(0,a.$p)(new o.Pq0(t,0,e));h.push(i.x,i.y,-50)}p=new o.ZLX(a.PL,a._s,h.length/3);let u=new o.B69;for(let t=0;t<h.length;t+=3)u.position.set(h[t+0],h[t+1],h[t+2]),u.updateMatrix(),p.setMatrixAt(t/3,u.matrix);p.instanceMatrix.needsUpdate=!0,i.add(p);let c=[],d=!1,k=new o.tBo,y=new o.I9Y,w=new o.Zcv(new o.Pq0(0,0,1),0),_=new o.Pq0;function b(t){let e=n.domElement.getBoundingClientRect();return y.x=(t.clientX-e.left)/e.width*2-1,y.y=-(2*((t.clientY-e.top)/e.height))+1,k.setFromCamera(y,s),k.ray.intersectPlane(w,_),_.clone()}function f(t){return t.x>=s.left&&t.x<=s.right&&t.y>=s.bottom&&t.y<=s.top}function P(t){if(c.length>=4)return;let e=new r(i);e.bg_grid_size=5,e.make_new_cube(t,c)&&(e.object&&i.add(e.object),e.points&&i.add(e.points),c.push(e))}function g(t){if(!d)return;let e=b(t);if(!f(e))return;let i=m(e);if(i){for(let t=0;t<4;t++)P(i);d=!1}}function z(t){if(console.log("pointer"),!d)return;let e=b(t);if(console.log(e),!f(e))return;let i=m(e);i&&(P(i),d=!1)}n.domElement.addEventListener("pointermove",g),n.domElement.addEventListener("pointerdown",z),P(new o.Pq0(0,0,0));let x=()=>{let t=e.clientWidth||300,i=e.clientHeight||300;n.setSize(t,i,!1);let o=t/i;s.left=-6*o/2,s.right=6*o/2,s.top=3,s.bottom=-3,s.updateProjectionMatrix()};window.addEventListener("resize",x),x();let M=0,E=performance.now(),v=t=>{M=requestAnimationFrame(v);let e=(t-E)/1e3*.1;E=t;for(let t=c.length-1;t>=0;t--){let s=c[t];s.update(e),s.t>=s.duration&&(s.points&&(i.remove(s.points),s.points.geometry.dispose(),s.points=null),i.remove(s.object),s.object.geometry.dispose(),c.splice(t,1))}d=c.length<4,n.render(i,s)};return v(E),()=>{for(let t of(cancelAnimationFrame(M),window.removeEventListener("resize",x),n.domElement.removeEventListener("pointermove",g),n.domElement.removeEventListener("pointerdown",z),e.removeChild(n.domElement),n.dispose(),c))t.points&&t.points.geometry.dispose(),t.object.geometry.dispose();p&&p.geometry.dispose(),a.EC.dispose(),a._s.dispose()}},[]),(0,s.jsx)("div",{ref:t,className:"w-full h-full overflow-hidden"})}}},t=>{t.O(0,[974],()=>{[33,323,315,991].map(t.E)},5),t.O(0,[831,367,248,354,441,964,358],()=>t(t.s=528)),_N_E=t.O()}]);
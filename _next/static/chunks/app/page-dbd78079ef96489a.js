(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2769:(e,t,n)=>{Promise.resolve().then(n.bind(n,8435))},3265:(e,t,n)=>{"use strict";n.d(t,{N:()=>o,w:()=>u});var i=n(5155),s=n(2115),r=n(5379);let a=(0,s.createContext)(void 0);function o(e){let{children:t}=e;return(0,i.jsx)(r.N,{attribute:"data-theme",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,i.jsx)(l,{children:t})})}function l(e){let{children:t}=e,{theme:n,setTheme:o,systemTheme:l}=(0,r.D)(),u="system"===n?l:n,m=(0,s.useMemo)(()=>({theme:n,resolved_theme:u,setTheme:o}),[n,u,o]);return(0,i.jsx)(a.Provider,{value:m,children:t})}function u(){let e=(0,s.useContext)(a);if(!e)throw Error("useThemeContext must be inside ThemeProvider");return e}},4566:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(5155),s=n(2115);function r(e){let{children:t,trigger:n=!0}=e,[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(n){let e=requestAnimationFrame(()=>a(!0));return()=>cancelAnimationFrame(e)}a(!1)},[n]),(0,i.jsx)("div",{className:"flex flex-1 transition-opacity duration-[400ms] ".concat(r?"opacity-100":"opacity-0"),children:t})}},5379:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,N:()=>m});var i=n(2115),s=(e,t,n,i,s,r,a,o)=>{let l=document.documentElement,u=["light","dark"];function m(t){var n;(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,i=n&&r?s.map(e=>r[e]||e):s;n?(l.classList.remove(...i),l.classList.add(r&&r[t]?r[t]:t)):l.setAttribute(e,t)}),n=t,o&&u.includes(n)&&(l.style.colorScheme=n)}if(i)m(i);else try{let e=localStorage.getItem(t)||n,i=a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;m(i)}catch(e){}},r=["light","dark"],a="(prefers-color-scheme: dark)",o=i.createContext(void 0),l={setTheme:e=>{},themes:[]},u=()=>{var e;return null!=(e=i.useContext(o))?e:l},m=e=>i.useContext(o)?i.createElement(i.Fragment,null,e.children):i.createElement(h,{...e}),c=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:s=!0,enableColorScheme:l=!0,storageKey:u="theme",themes:m=c,defaultTheme:h=s?"system":"light",attribute:w="data-theme",value:k,children:b,nonce:g,scriptProps:v}=e,[x,_]=i.useState(()=>p(u,h)),[P,M]=i.useState(()=>"system"===x?y():x),E=k?Object.values(k):m,T=i.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=y());let i=k?k[t]:t,a=n?f(g):null,o=document.documentElement,u=e=>{"class"===e?(o.classList.remove(...E),i&&o.classList.add(i)):e.startsWith("data-")&&(i?o.setAttribute(e,i):o.removeAttribute(e))};if(Array.isArray(w)?w.forEach(u):u(w),l){let e=r.includes(h)?h:null,n=r.includes(t)?t:e;o.style.colorScheme=n}null==a||a()},[g]),z=i.useCallback(e=>{let t="function"==typeof e?e(x):e;_(t);try{localStorage.setItem(u,t)}catch(e){}},[x]),S=i.useCallback(e=>{M(y(e)),"system"===x&&s&&!t&&T("system")},[x,t]);i.useEffect(()=>{let e=window.matchMedia(a);return e.addListener(S),S(e),()=>e.removeListener(S)},[S]),i.useEffect(()=>{let e=e=>{e.key===u&&(e.newValue?_(e.newValue):z(h))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[z]),i.useEffect(()=>{T(null!=t?t:x)},[t,x]);let C=i.useMemo(()=>({theme:x,setTheme:z,forcedTheme:t,resolvedTheme:"system"===x?P:x,themes:s?[...m,"system"]:m,systemTheme:s?P:void 0}),[x,z,t,P,s,m]);return i.createElement(o.Provider,{value:C},i.createElement(d,{forcedTheme:t,storageKey:u,attribute:w,enableSystem:s,enableColorScheme:l,defaultTheme:h,value:k,themes:m,nonce:g,scriptProps:v}),b)},d=i.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:r,enableSystem:a,enableColorScheme:o,defaultTheme:l,value:u,themes:m,nonce:c,scriptProps:h}=e,d=JSON.stringify([r,n,l,t,m,u,a,o]).slice(1,-1);return i.createElement("script",{...h,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(d,")")}})}),p=(e,t)=>{let n;try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(a)),e.matches?"dark":"light")},6174:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});var i=n(5155),s=n(2115);function r(e){let{src:t="/tiles/tile.png",className:n,lock_viewport:r=!1}=e,a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=a.current,n=new Image;n.src=t;let i=()=>{let t=window.devicePixelRatio||1;if(n.naturalWidth&&n.naturalHeight){let i=n.naturalWidth/t,s=n.naturalHeight/t;e.style.backgroundSize="".concat(i,"px ").concat(s,"px")}r&&(e.style.height="".concat(window.screen.height,"px")),e.style.animationPlayState="running"};return n.complete?i():n.onload=i,window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[t,r]),(0,i.jsx)("div",{ref:a,className:"tiled-bg fixed inset-0 -z-10 pointer-events-none ".concat(null!=n?n:"")})}},8435:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var i=n(5155),s=n(2115),r=n(5339),a=n(7548);let o=new r.Gu$(.02,6,5),l=new r.O9p(.6154797086703873,-(.25*Math.PI),0,"XYZ"),u=new r.kn4().makeRotationFromEuler(l),m=new r.V9B({color:new r.Q1f("#ffffff"),depthTest:!0,depthWrite:!0}),c=new r.V9B({color:new r.Q1f("#000000")});function h(){let e=getComputedStyle(document.documentElement),t=e.getPropertyValue("--color-back").trim();console.log("back: ",t);let n=e.getPropertyValue("--color-primary").trim(),i=e=>e.replace(/rgb\((\d+)\s+(\d+)\s+(\d+)\)/,"rgb($1,$2,$3)");c.color.set(i(t)||"#000"),m.color.set(i(n)||"#fff"),console.log("globalCubeMaterial.color ",c.color)}function d(e,t){return e.applyAxisAngle(new r.Pq0(1,0,0),t)}function p(e,t){return e.applyAxisAngle(new r.Pq0(0,1,0),t)}function f(e){return d(p(e.multiplyScalar(.54),.25*Math.PI),-.6154797086703873)}function y(e,t,n){return-t<1+e+n&&t-n-1<-e}function w(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=i+(s-i)*(e-t)/(n-t);if(!r)return a;if(s<i){if(a<s)return s;if(a>i)return i}else{if(a>s)return s;if(a<i)return i}return a}let k=e=>e*e,b=[0,.55,.85],g=[1,.18,.035];function v(e){let t=Math.cos(-(.25*Math.PI)),n=-.5773502691896257*Math.sin(-(.25*Math.PI));return new r.Pq0(Math.round(e.x/t),Math.round(-n*e.x/t/.816496580927726+e.y/.816496580927726),0)}function x(e,t){return Math.floor(Math.random()*(t-e+1))+e}class _{update(e){var t;if(!this.duration)return;this.t+=e;let n=this.t/this.duration;n=function(e){for(let t=0;t<3;t++)if(e<b[t])return 1-g[t-1]*(1-k(w(e,b[t-1],b[t],1==t?0:-1,1)));return 1-(1-Math.min(1,Math.max(0,k(w(e,b[2],1,-1,1)))))*g[2]}(n=(t=n)<.5?.5*Math.pow(2*t,2):1-.5*Math.pow(2*(1-t),2));let i=.54*this.cube_size,s=new r.kn4().identity();s.premultiply(this.action(n)),s.premultiply(u),s.premultiply(new r.kn4().makeTranslation(this.start_pos.x,this.start_pos.y,this.start_pos.z)),s.premultiply(new r.kn4().makeScale(i,i,i)),this.object.position.set(0,0,0),this.object.rotation.set(0,0,0),this.object.scale.set(1,1,1),this.object.applyMatrix4(s);let a=new r.Pq0().setFromMatrixScale(s);if(this.object.scale.set(a.x,a.y,a.z),this.points&&this.baseDotPositions){s.decompose(this._pos,this._quat,this._scl),this.points.position.copy(this._pos),this.points.quaternion.copy(this._quat),this.points.scale.set(1,1,1),this.points.position.z+=this.dotZBias;let e=this.baseDotPositions.length/3;for(let t=0;t<e;t++)this._dummy.position.set(this.baseDotPositions[3*t+0]*this._scl.x,this.baseDotPositions[3*t+1]*this._scl.y,this.baseDotPositions[3*t+2]*this._scl.z),this._dummy.rotation.set(0,0,0),this._dummy.scale.set(1,1,1),this._dummy.updateMatrix(),this.points.setMatrixAt(t,this._dummy.matrix);this.points.instanceMatrix.needsUpdate=!0}}getStartPos(){return new r.Pq0().copy(this.start_pos).multiplyScalar(this.cube_size)}getEndPos(){return new r.Pq0().applyMatrix4(this.action(1).premultiply(u)).add(this.start_pos).multiplyScalar(this.cube_size)}make_new_cube(e,t){if(this.t=0,this.cube_size=x(1,3),this.mvm=x(0,10),this.time_offset=x(0,1),this.duration=.08+.1*((this.cube_size-1)/4),this.points&&(this.points.geometry.dispose(),this.points=null),e){let t=.54*this.cube_size;this.start_pos=e.clone().multiplyScalar(1/Math.max(t,1e-6))}else{let e=function(e){let t=x(-e,e),n=x(-e,e);for(;!y(t,n,e);)t=x(-e,e),n=x(-e,e);var i=new r.I9Y(t,n);let s=Math.cos(-(.25*Math.PI*1)),a=-.5773502691896257*Math.sin(-(.25*Math.PI*1));return new r.Pq0(Math.round(s*i.x),Math.round(a*i.x-.816496580927726*i.y),0)}(Math.floor(.4*this.bg_grid_size)-1);this.start_pos=e}let n=v(this.getStartPos()),i=v(this.getEndPos());if(t&&t.length>0){for(let e of[n,i])for(let n of t)for(let t of[v(n.getStartPos()),v(n.getEndPos())])for(let i=-this.cube_size;i<this.cube_size+1;i++)for(let s=-this.cube_size;s<this.cube_size+1;s++)if(y(i,s,this.cube_size-1)&&y(i-e.x+t.x,s-e.y+t.y,n.cube_size))return!1}let s=[];for(let e=0;e<=this.cube_size;e++)for(let t=0;t<=this.cube_size;t++)for(let n=0;n<=this.cube_size;n++)Math.min(e,t,n)>0&&Math.max(e,t,n)<this.cube_size||s.push(e/this.cube_size-.5,t/this.cube_size-.5,n/this.cube_size-.5);this.baseDotPositions=new Float32Array(s);let a=s.length/3,l=new r.ZLX(o,m,a);for(let e=0;e<a;e++){let t=s[3*e+0],n=s[3*e+1],i=s[3*e+2];this._dummy.position.set(t,n,i),this._dummy.rotation.set(0,0,0),this._dummy.scale.set(1,1,1),this._dummy.updateMatrix(),l.setMatrixAt(e,this._dummy.matrix)}return l.instanceMatrix.needsUpdate=!0,l.instanceMatrix.setUsage(r.Vnu),l.renderOrder=999,l.frustumCulled=!1,this.points=l,this.update(0),!0}action(e){let t=new r.kn4().identity();switch(this.mvm){case 0:t.premultiply(new r.kn4().makeTranslation(-.5,.5,0)),t.premultiply(new r.kn4().makeRotationZ(-(.5*Math.PI)*e)),t.premultiply(new r.kn4().makeTranslation(.5,-.5,0));break;case 1:t.premultiply(new r.kn4().makeTranslation(0,.5,-.5)),t.premultiply(new r.kn4().makeRotationX(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(0,-.5,.5));break;case 2:t.premultiply(new r.kn4().makeTranslation(.5,.5,0)),t.premultiply(new r.kn4().makeRotationZ(-(.5*Math.PI)*e)),t.premultiply(new r.kn4().makeTranslation(-.5,-.5,0));break;case 3:t.premultiply(new r.kn4().makeTranslation(0,.5,.5)),t.premultiply(new r.kn4().makeRotationX(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(0,-.5,-.5));break;case 4:t.premultiply(new r.kn4().makeTranslation(-.5,0,.5)),t.premultiply(new r.kn4().makeRotationY(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(.5,0,-.5));break;case 5:t.premultiply(new r.kn4().makeTranslation(.5,0,-.5)),t.premultiply(new r.kn4().makeRotationY(-(.5*Math.PI)*e)),t.premultiply(new r.kn4().makeTranslation(-.5,0,.5));break;case 6:case 7:t.premultiply(new r.kn4().makeTranslation(.5,0,.5)),t.premultiply(new r.kn4().makeRotationY(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(-.5,0,-.5));break;case 8:t.premultiply(new r.kn4().makeTranslation(.5,0,0)),t.premultiply(new r.kn4().makeScale(e,1,1)),t.premultiply(new r.kn4().makeTranslation(-.5,0,0));break;case 9:t.premultiply(new r.kn4().makeTranslation(0,0,.5)),t.premultiply(new r.kn4().makeScale(1,1,e)),t.premultiply(new r.kn4().makeTranslation(0,0,-.5));break;case 10:t.premultiply(new r.kn4().makeTranslation(0,.5,0)),t.premultiply(new r.kn4().makeScale(1,e,1)),t.premultiply(new r.kn4().makeTranslation(0,-.5,0))}return t}constructor(e){this.t=0,this.bg_grid_size=5,this.squish=.5,this.dotZBias=.1,this.points=null,this.baseDotPositions=null,this._dummy=new r.B69,this._pos=new r.Pq0,this._quat=new r.PTz,this._scl=new r.Pq0;let t=new r.iNn(1,1,1);this.object=new r.eaF(t,c),this.object.position.set(0,0,0),this.object.userData={cube:this}}}var P=n(3265);function M(e){let{onReady:t}=e,n=(0,s.useRef)(null),{resolved_theme:l}=(0,P.w)();return(0,s.useEffect)(()=>{let e=n.current,i=new r.Z58,s=new r.qUd(-3,3,3,-3,-100,100);s.position.set(0,0,10),s.lookAt(0,0,0);let l=new a.JeP({antialias:!0,powerPreference:"low-power",preserveDrawingBuffer:!1,alpha:!0});l.setPixelRatio(A()),l.domElement.style.display="block",l.domElement.style.width="100%",l.domElement.style.height="100%",e.appendChild(l.domElement),h();let u=null;function w(e){let t=p(d(e,.6154797086703873),-(.25*Math.PI)).multiplyScalar(1.8518518518518516);t.x=Math.round(t.x),t.y=Math.round(t.y),t.z=Math.round(t.z);let n=f(t);return n.z=0,n}let k=[];for(let e=-24;e<25;e++)for(let t=-24;t<25;t++)if(y(e,t,24)){let n=f(new r.Pq0(e,0,t));k.push(n.x,n.y,-50)}u=new r.ZLX(o,m,k.length/3);let b=new r.B69;for(let e=0;e<k.length;e+=3)b.position.set(k[e+0],k[e+1],k[e+2]),b.updateMatrix(),u.setMatrixAt(e/3,b.matrix);u.instanceMatrix.needsUpdate=!0,i.add(u);let g=[],v=!1,x=new r.tBo,P=new r.I9Y,M=new r.Zcv(new r.Pq0(0,0,1),0),E=new r.Pq0;function T(e){let t=l.domElement.getBoundingClientRect();return P.x=(e.clientX-t.left)/t.width*2-1,P.y=-(2*((e.clientY-t.top)/t.height))+1,x.setFromCamera(P,s),x.ray.intersectPlane(M,E),E.clone()}function z(e){return e.x>=s.left&&e.x<=s.right&&e.y>=s.bottom&&e.y<=s.top}function S(e){if(g.length>=4)return;let t=new _(i);t.bg_grid_size=5,t.make_new_cube(e,g)&&(t.object&&i.add(t.object),t.points&&i.add(t.points),g.push(t))}function C(e){if(!v)return;let t=T(e);if(!z(t))return;let n=w(t);if(n){for(let e=0;e<4;e++)S(n);v=!1}}function j(e){if(console.log("pointer"),!v)return;let t=T(e);if(console.log(t),!z(t))return;let n=w(t);n&&(S(n),v=!1)}function A(){var e,t;let n=null!=(t=null==(e=window.visualViewport)?void 0:e.scale)?t:1;return(window.devicePixelRatio||1)*n}l.domElement.addEventListener("pointermove",C),l.domElement.addEventListener("pointerdown",j),S(new r.Pq0(0,0,0));let q=()=>{let t=e.clientWidth||300,n=e.clientHeight||300,i=A();l.setPixelRatio(i),l.setSize(t,n,!1);let r=t/n;s.left=-6*r/2,s.right=6*r/2,s.top=3,s.bottom=-3,s.updateProjectionMatrix()};window.addEventListener("resize",q),q();let I=0,L=performance.now(),R=!1,N=e=>{I=requestAnimationFrame(N);let n=(e-L)/1e3*.1;L=e;for(let e=g.length-1;e>=0;e--){let t=g[e];t.update(n),t.t>=t.duration&&(t.points&&(i.remove(t.points),t.points.geometry.dispose(),t.points=null),i.remove(t.object),t.object.geometry.dispose(),g.splice(e,1))}v=g.length<4,l.render(i,s),R||(R=!0,null==t||t())};return N(L),()=>{for(let t of(cancelAnimationFrame(I),window.removeEventListener("resize",q),l.domElement.removeEventListener("pointermove",C),l.domElement.removeEventListener("pointerdown",j),e.removeChild(l.domElement),l.dispose(),g))t.points&&t.points.geometry.dispose(),t.object.geometry.dispose();u&&u.geometry.dispose(),c.dispose(),m.dispose()}},[]),(0,s.useEffect)(()=>{let e=requestAnimationFrame(()=>{h()});return()=>cancelAnimationFrame(e)},[l]),(0,i.jsx)("div",{ref:n,className:"absolute inset-0 overflow-hidden bg-back"})}var E=n(6174),T=n(4566);function z(){let[e,t]=(0,s.useState)(!1);return(0,i.jsx)("div",{className:"flex-1 flex",children:(0,i.jsx)("main",{className:"flex flex-1",children:(0,i.jsxs)(T.A,{trigger:e,children:[(0,i.jsx)(M,{onReady:()=>t(!0)}),(0,i.jsx)(E.default,{className:"z-10 invert-1"})]})})})}}},e=>{e.O(0,[367,831,441,255,358],()=>e(e.s=2769)),_N_E=e.O()}]);
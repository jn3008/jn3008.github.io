(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{4679:(e,t,r)=>{Promise.resolve().then(r.bind(r,5149))},5149:(e,t,r)=>{"use strict";r.d(t,{default:()=>E});var n=r(5155),i=r(2115);let l=[],a=[],o=0,s=new Set;function c(){let e={active:a.length,queued:l.length,activeList:a.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}}),queuedList:l.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}})};s.forEach(t=>t(e))}function u(){if(0!==a.length)return a.reduce((e,t)=>t.priority<e.priority?t:e,a[0])}let d=[];function h(e){let{src:t,when_to_play:r="hover",poster:h,wrapperStyle:f,label:m,fetchThresholdPct:p=50,maxFetched:v=7,onClickVideo:x}=e,g=(0,i.useRef)("undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)).current,y=(0,i.useRef)(null),w=(0,i.useRef)(null),b=(0,i.useRef)(!1),j=(0,i.useRef)(null),N=(0,i.useRef)(null),[E,_]=(0,i.useState)(!1),[k,S]=(0,i.useState)(0),[R,L]=(0,i.useState)(null),[M,C]=(0,i.useState)(!1),[A,F]=(0,i.useState)(0),[z,P]=(0,i.useState)(0),[T,V]=(0,i.useState)([]),[D,I]=(0,i.useState)([]),H=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;return e=e=>{let{active:t,queued:r,activeList:n,queuedList:i}=e;F(t),P(r),V(n),I(i)},s.add(e),e({active:a.length,queued:l.length,activeList:a.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}}),queuedList:l.map(e=>{let{id:t,name:r,priority:n}=e;return{id:t,name:r,priority:n}})}),()=>{s.delete(e)}},[]),(0,i.useEffect)(()=>{let e=y.current;if(!e)return;let t={threshold:Array.from({length:21},(e,t)=>t/20)};if(p<0){let e=Math.abs(p);t.rootMargin="".concat(e,"% 0% ").concat(e,"% 0%")}let r=new IntersectionObserver(e=>{let[t]=e,r=100*t.intersectionRatio;p<0?_(t.isIntersecting):_(r>=p)},t);return r.observe(e),()=>r.disconnect()},[p]);let O=()=>{let e=y.current;if(!e)return 0;let t=e.getBoundingClientRect();return Math.floor((1-Math.min(1,Math.abs(t.top+t.height/2-window.innerHeight/2)/(window.innerHeight/2+t.height/2)))*1e3)},U=(0,i.useCallback)(()=>{if(E&&!b.current&&!N.current&&!a.some(e=>e.id===g)&&!l.find(e=>e.id===g)){let e=new AbortController;H.current=e;let r=async()=>{try{let r=await fetch(t,{signal:e.signal});if(!r.body)throw Error("No response body");let n=Number(r.headers.get("content-length"))||0,i=r.body.getReader(),l=0,a=[];for(;;){let{done:e,value:t}=await i.read();if(e)break;t&&(a.push(t),l+=t.length,n&&S(Math.round(l/n*100)))}let o=r.headers.get("content-type")||"video/mp4",s=new Blob(a,{type:o}),c=URL.createObjectURL(s);j.current=c,L(c),N.current=c,S(100),C(!0),b.current=!0}catch(e){e instanceof DOMException&&e.name}},n=void 0!==m?String(m):t.split("/").pop()||g;!function(e){let t=a.find(t=>t.id===e.id);if(t){t.priority=e.priority,c();return}let r=l.findIndex(t=>t.id===e.id);r>=0?(l[r].priority=e.priority,l[r].name=e.name):l.push(e),l.sort((e,t)=>t.priority-e.priority);let n=l[0],i=u();n&&i&&n.priority>i.priority+100&&i.controller.abort(),c(),function e(){for(;a.length<2&&l.length>0;){let t=l.shift();a.push(t),c(),Promise.resolve(t.start()).catch(e=>{}).finally(()=>{a=a.filter(e=>e.id!==t.id),c(),e()})}}()}({id:g,name:n,start:r,priority:O()+ ++o,controller:e})}},[E,g,m,t]);return(0,i.useEffect)(()=>{if(!E)return;let e=0,t=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{!function(e,t){let r=a.find(t=>t.id===e);if(r){r.priority=t,c();return}let n=l.find(t=>t.id===e);if(n){n.priority=t,l.sort((e,t)=>t.priority-e.priority);let r=l[0],i=u();r&&i&&r.id===e&&r.priority>i.priority+100&&i.controller.abort(),c()}}(g,O()+ ++o),b.current||N.current||U()})};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),t(),()=>{cancelAnimationFrame(e),window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[E,g,U]),(0,i.useEffect)(()=>{if(!E){let e=l.length;(l=l.filter(e=>e.id!==g)).length!==e&&c(),S(0),C(!1),b.current=!1,w.current&&(w.current.removeAttribute("src"),w.current.load()),j.current&&(URL.revokeObjectURL(j.current),j.current=null),L(null),N.current=null,H.current&&(H.current.abort(),H.current=null);return}return U(),()=>{H.current&&(H.current.abort(),H.current=null)}},[E,t,g,U]),(0,i.useEffect)(()=>{let e=w.current;if(e)if(E){if(d.length>=v){let e=d.shift();e&&(e.pause(),e.removeAttribute("src"),e.load())}d.includes(e)||d.push(e)}else e.pause(),e.removeAttribute("src"),e.load(),d=d.filter(t=>t!==e)},[E,v]),(0,n.jsx)("div",{ref:y,style:{...f,position:"relative",backgroundImage:h?"url(".concat(h,")"):void 0,backgroundSize:"cover",backgroundPosition:"center"},children:E?(0,n.jsxs)(n.Fragment,{children:[R?(0,n.jsx)("video",{ref:w,src:R,muted:!0,playsInline:!0,loop:!0,preload:"auto",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onClick:()=>null==x?void 0:x(w.current),onMouseEnter:()=>{var e;return"hover"==r&&M&&(null==(e=w.current)?void 0:e.play())},onMouseLeave:()=>{var e;return"hover"==r&&M&&(null==(e=w.current)?void 0:e.pause())},onCanPlayThrough:()=>{if("ready"===r&&M){var e;null==(e=w.current)||e.play()}}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"z-10 absolute top-0 left-0 flex items-center justify-center w-full h-full text-white text-xs",style:{background:"rgba(0,0,0,0.3)"},children:"loading ".concat(k,"%")}),(0,n.jsx)("div",{className:"z-0 absolute top-0 left-0 w-full h-full pointer-events-none transition duration-200",style:{background:"rgba(128,128,128,".concat(Math.max(0,.3-k/100*.3),")"),backdropFilter:"blur(".concat(Math.max(0,20-k/100*20),"px)")}})]}),!1]}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",color:"#fff",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.4)"},children:"placeholder ".concat(m)})})}function f(e){let{video:t,onClickVideo:r,style:i,when_to_play:l}=e;return(0,n.jsxs)("div",{style:{position:"relative",overflow:"hidden",...i},children:[(0,n.jsx)(h,{src:t.src,poster:t.poster,wrapperStyle:{width:"100%",height:"100%"},when_to_play:l,fetchThresholdPct:-100,maxFetched:7,onClickVideo:r}),t.title&&(0,n.jsx)("div",{className:"absolute bottom-0 w-full bg-black/50 text-white/80 text-xs px-1 py-0.5 text-center",children:t.title})]})}function m(e){let{videos:t,precomputedDimensions:r,onClickVideo:l,when_to_play:a,spacing:o=12,onReady:s}=e;return console.log("when_to_play",a),(0,i.useEffect)(()=>{s&&(s(),console.log("On READY PORTRAIT"))},[s]),(0,n.jsx)("div",{className:"flex flex-col",style:{gap:o},children:t.map((e,t)=>{let i=null==r?void 0:r[t],o=i?i.width/i.height:16/9;return(0,n.jsx)(f,{video:e,onClickVideo:l,when_to_play:a,style:{width:"100%",aspectRatio:o}},t)})})}var p=r(7920);function v(e){let{videos:t,precomputedDimensions:r,targetRowHeight:l=620,boxSpacing:a=20,onClickVideo:o,when_to_play:s,onReady:c,className:u}=e,d=(0,i.useRef)(null),[f,m]=(0,i.useState)(0),[v,x]=(0,i.useState)([]),[g,y]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!d.current)return;let e=new ResizeObserver(e=>{for(let t of e)m(t.contentRect.width)});return e.observe(d.current),()=>e.disconnect()},[]),(0,i.useEffect)(()=>{if(null==r?void 0:r.length){let e=t.map((e,t)=>({v:e,d:r[t]})).filter(e=>e.d&&Number.isFinite(e.d.width)&&Number.isFinite(e.d.height));y(e.map(e=>e.v)),x(e.map(e=>e.d))}else y([]),x([])},[t,r]),(0,i.useEffect)(()=>{if(null==r?void 0:r.length)return;let e=!0;return async function(){let r=performance.now(),n=await Promise.allSettled(t.map(e=>new Promise((t,r)=>{if(!e.poster)return r("No poster");let n=new Image;n.onload=()=>t({width:n.width,height:n.height}),n.onerror=r,n.src=e.poster}))),i=performance.now();if(console.log("â³ Measuring posters took ".concat((i-r).toFixed(2)," ms")),!e)return;let l=[],a=[];n.forEach((e,r)=>{"fulfilled"===e.status&&Number.isFinite(e.value.width)&&Number.isFinite(e.value.height)?(l.push(e.value),a.push(t[r])):console.warn(n[r])}),x(l),y(a)}(),()=>{e=!1}},[t,r]);let w=Math.max(1,Math.floor(f)),b=performance.now(),[j]=(0,p.A)({layoutInput:v,configuration:{targetRowHeight:l,boxSpacing:a,containerWidth:w,containerPadding:{top:0,right:0,bottom:0,left:0}},dependencies:[v,l,a,w]}),N=performance.now();console.log("\uD83D\uDCD0 Layout calculation: ".concat((N-b).toFixed(2)," ms"));let E=w>1&&v.length>0;return(0,i.useEffect)(()=>{E&&c&&c()},[E,c]),(0,n.jsx)("div",{style:{height:E?j.containerHeight:void 0},className:u,children:(0,n.jsx)("div",{ref:d,style:{position:"relative"},children:E&&j.boxes.map((e,t)=>(0,n.jsxs)("div",{style:{position:"absolute",top:e.top,left:e.left,width:e.width,height:e.height,cursor:"pointer",overflow:"hidden",contentVisibility:"auto",contain:"layout style paint"},children:[(0,n.jsx)(h,{src:g[t].src,poster:g[t].poster,label:t,wrapperStyle:{width:"100%",height:"100%"},when_to_play:s,fetchThresholdPct:-100,maxFetched:7,onClickVideo:o}),g[t].title&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"absolute bottom-0 w-full bg-black/50 text-white/80 text-xs px-1 py-0.5 text-center",children:g[t].title})})]},t))})})}var x=r(7211),g=r.n(x),y=r(6036),w=r(6174);function b(e){let{videos:t,precomputedDimensions:r,onReady:l}=e,[a,o]=(0,i.useState)(!0),[s,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),h=(0,y.A)(),[f,p]=(0,i.useState)(400),[x,b]=(0,i.useState)(20);(0,i.useEffect)(()=>{var e,t,r;let n=window.matchMedia("(min-width: 768px)"),i=innerWidth,l=()=>{var e,t;let r=innerWidth,n=null!=(t=null==(e=visualViewport)?void 0:e.height)?t:innerHeight;2>Math.abs(r-i)&&h||(i=r,o(1.3*r>n),p(.55*n))};h&&p((null!=(r=null==(e=visualViewport)?void 0:e.height)?r:innerHeight)*.55);let a=()=>b(n.matches?20:12);return l(),a(),n.addEventListener("change",a),null==(t=visualViewport)||t.addEventListener("resize",l),addEventListener("orientationchange",l),()=>{var e;n.removeEventListener("change",a),null==(e=visualViewport)||e.removeEventListener("resize",l),removeEventListener("orientationchange",l)}},[h]);let j=(0,i.useCallback)(e=>{if(s)return;let t=e.currentSrc||e.src,r=e.getAttribute("poster")||void 0;e.style.opacity="0",d(e),c({src:t,poster:r,currentTime:e.currentTime})},[s]),N=(0,i.useCallback)(()=>{u&&(u.style.opacity="1"),c(null),d(null)},[u]);(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&N()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[N]);let E=(0,i.useMemo)(()=>h?void 0:j,[h,j]),_=(0,i.useMemo)(()=>h?"ready":"hover",[h]);return(0,n.jsxs)("div",{children:[a?(0,n.jsx)(v,{videos:t,precomputedDimensions:r,targetRowHeight:f,boxSpacing:x,onClickVideo:E,when_to_play:"hover",onReady:l}):(0,n.jsx)(m,{videos:t,precomputedDimensions:r,spacing:2*x,onClickVideo:E,when_to_play:_,onReady:l}),s&&(0,n.jsxs)("div",{className:"".concat(g().overlay),onClick:N,children:[(0,n.jsx)(w.default,{}),(0,n.jsx)("div",{className:"flex items-center justify-center",onClick:e=>e.stopPropagation(),children:(0,n.jsx)("video",{src:s.src,poster:s.poster,controls:!0,autoPlay:!0,loop:!0,muted:!1,style:{maxWidth:"90vw",maxHeight:"80vh",minWidth:"60vw",minHeight:"40vh",width:"auto",height:"auto",objectFit:"contain"},onLoadedMetadata:e=>{e.currentTarget.currentTime=s.currentTime}})})]})]})}var j=r(8455);function N(e){let{children:t,trigger:r=!0}=e,[l,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(r){let e=requestAnimationFrame(()=>a(!0));return()=>cancelAnimationFrame(e)}a(!1)},[r]),(0,n.jsx)("div",{className:"flex flex-1 transition-opacity duration-[400ms] ".concat(l?"opacity-100":"opacity-0"),children:t})}function E(e){let{title:t,videos:r,precomputedDimensions:l}=e,[a,o]=(0,i.useState)(!1);return(0,n.jsx)(N,{trigger:a,children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("main",{className:"md:content",children:[(0,n.jsx)("div",{className:"flex flex-col justify-center items-center py-10",children:(0,n.jsx)("div",{className:"font-medium text-xl",children:t})}),(0,n.jsx)(b,{videos:r,precomputedDimensions:l,onReady:()=>o(!0)})]}),(0,n.jsx)(j.default,{})]})})}},6036:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2115);function i(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if("undefined"!=typeof navigator){let e=window,r=navigator.userAgent||String(e.opera||"");t(/android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(r.toLowerCase()))}},[]),e}},6174:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(5155),i=r(2115);function l(e){let{src:t="/tiles/tile.png",className:r,lock_viewport:l=!1}=e,a=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=a.current,r=new Image;r.src=t;let n=()=>{let t=window.devicePixelRatio||1;if(r.naturalWidth&&r.naturalHeight){let n=r.naturalWidth/t,i=r.naturalHeight/t;e.style.backgroundSize="".concat(n,"px ").concat(i,"px")}l&&(e.style.height="".concat(window.screen.height,"px")),e.style.animationPlayState="running"};return r.complete?n():r.onload=n,window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t,l]),(0,n.jsx)("div",{ref:a,className:"tiled-bg fixed inset-0 -z-10 pointer-events-none ".concat(null!=r?r:"")})}},7211:e=>{e.exports={toggle:"Gallery_toggle__hkqzC",galleryRows:"Gallery_galleryRows__BkK15",column:"Gallery_column__LNN0D",videoWrapper:"Gallery_videoWrapper__de23j",galleryVertical:"Gallery_galleryVertical__90dRk",overlay:"Gallery_overlay__s59Pr",zoomVideo:"Gallery_zoomVideo__B6anM"}},8455:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(5155),i=r(2619),l=r.n(i),a=r(2115),o=r(898);let s=[{name:"instagram",href:"https://instagram.com/jn3oo8",icon:o.ao$,aria:"Instagram"},{name:"github",href:"https://github.com/jn3008/",icon:o.hL4,aria:"GitHub"},{name:"twitter",href:"https://x.com/jn3008",icon:o.feZ,aria:"Twitter (X)"},{name:"tumblr",href:"https://jn3008.tumblr.com/",icon:o.kUm,aria:"Tumblr"},{name:"mastodon",href:"https://mastodon.social/@jn3008",icon:o.hHC,aria:"Mastodon",me:!0},{name:"email",href:"mailto:contact@jn3008.com",icon:o.maD,aria:"Email"}];function c(e){let{className:t=""}=e,r="group inline-flex items-center justify-center p-1 rounded-lg    focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/60    transition-colors duration-300 ease-in-out",i=(0,n.jsx)(l(),{href:"/about",className:"underline-offset-4 hover:underline",children:(0,n.jsx)("div",{children:"ABOUT"})}),o=(0,n.jsx)(l(),{href:"/contact",className:"underline-offset-4 hover:underline",children:(0,n.jsx)("div",{children:"CONTACT"})}),[c,u]=(0,a.useState)(s.map(()=>({x:0,y:0,rot:0})));(0,a.useEffect)(()=>{u(s.map(()=>({x:40*Math.random()-20,y:20*Math.random()-10,rot:30*Math.random()-15})))},[]);let d=(0,n.jsx)("div",{className:"relative w-full h-full grid grid-cols-3 grid-rows-2",children:s.map((e,t)=>{let{name:i,href:l,icon:a,aria:o,me:s}=e,{x:u,y:d,rot:h}=c[t];return(0,n.jsx)("a",{href:l,target:"_blank","aria-label":o,rel:"".concat(s?"me ":"","noopener noreferrer"),className:"".concat(r," inline-flex items-center justify-center justify-self-center self-center"),style:{transform:"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg)")},children:(0,n.jsx)(a,{size:"1.8em",className:"text-current transition-transform duration-300 group-hover:scale-125"})},i)})}),h=(0,n.jsx)("div",{className:"relative w-full h-full grid grid-cols-6 grid-rows-1",children:s.map((e,t)=>{let{name:i,href:l,icon:a,aria:o,me:s}=e,{x:u,y:d,rot:h}=c[t];return(0,n.jsx)("a",{href:l,target:"_blank","aria-label":o,rel:"".concat(s?"me ":"","noopener noreferrer"),className:"".concat(r," inline-flex items-center justify-center justify-self-center self-center"),style:{transform:"translate(".concat(u,"px, ").concat(d,"px) rotate(").concat(h,"deg)")},children:(0,n.jsx)(a,{size:"1.8em",className:"text-current transition-transform duration-300 group-hover:scale-125"})},i)})});return(0,n.jsxs)("footer",{children:[(0,n.jsxs)("div",{className:"hidden md:flex md:content-text mt-16 pb-10 px-0 flex-wrap\n          justify-between gap-2 text-primary font-medium items-stretch\n          ".concat(t),children:[(0,n.jsxs)("div",{className:"self-start text-left text-xs my-auto",children:[i,o]}),(0,n.jsx)("div",{className:"min-h-[60px] flex-1 min-w-[180px] max-w-[400px]",children:h}),(0,n.jsxs)("div",{className:"self-start text-right text-xs whitespace-nowrap my-auto",children:[(0,n.jsx)("p",{children:"jn3008"}),(0,n.jsx)("div",{className:"whitespace-nowrap",children:"All rights reserved."})]})]}),(0,n.jsx)("div",{className:"flex md:hidden flex-col mt-2 pb-4 px-4\n          items-center justify-between gap-2 text-primary font-medium\n          ".concat(t),children:(0,n.jsxs)("div",{className:"flex flex-wrap w-full justify-between items-stretch",children:[(0,n.jsxs)("div",{className:"flex my-auto flex-col gap-1 self-start text-left text-xs",children:[i,o,(0,n.jsx)("p",{children:"jn3008"}),(0,n.jsx)("p",{className:"whitespace-nowrap",children:"All rights reserved."})]}),(0,n.jsx)("div",{className:"min-h-[120px] flex-1 min-w-[180px] max-w-[400px]",children:d})]})})]})}}},e=>{e.O(0,[76,711,619,457,441,255,358],()=>e(e.s=4679)),_N_E=e.O()}]);
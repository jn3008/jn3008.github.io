(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3265:(e,t,n)=>{"use strict";n.d(t,{N:()=>a,w:()=>u});var i=n(5155),s=n(2115),r=n(5379);let o=(0,s.createContext)(void 0);function a(e){let{children:t}=e;return(0,i.jsx)(r.N,{attribute:"data-theme",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,i.jsx)(l,{children:t})})}function l(e){let{children:t}=e,{theme:n,setTheme:a,systemTheme:l}=(0,r.D)(),u="system"===n?l:n,m=(0,s.useMemo)(()=>({theme:n,resolved_theme:u,setTheme:a}),[n,u,a]);return(0,i.jsx)(o.Provider,{value:m,children:t})}function u(){let e=(0,s.useContext)(o);if(!e)throw Error("useThemeContext must be inside ThemeProvider");return e}},3291:(e,t,n)=>{"use strict";n.d(t,{default:()=>M});var i=n(5155),s=n(2115),r=n(5339),o=n(7548);let a=new r.Gu$(.02,6,5),l=new r.O9p(.6154797086703873,-(.25*Math.PI),0,"XYZ"),u=new r.kn4().makeRotationFromEuler(l),m=new r.V9B({color:new r.Q1f("#ffffff"),depthTest:!0,depthWrite:!0}),c=new r.V9B({color:new r.Q1f("#000000")});function h(){let e=getComputedStyle(document.documentElement),t=e.getPropertyValue("--color-back").trim();console.log("back: ",t);let n=e.getPropertyValue("--color-primary").trim(),i=e=>e.replace(/rgb\((\d+)\s+(\d+)\s+(\d+)\)/,"rgb($1,$2,$3)");c.color.set(i(t)||"#000"),m.color.set(i(n)||"#fff"),console.log("globalCubeMaterial.color ",c.color)}function d(e,t){return e.applyAxisAngle(new r.Pq0(1,0,0),t)}function p(e,t){return e.applyAxisAngle(new r.Pq0(0,1,0),t)}function f(e){return d(p(e.multiplyScalar(.57),.25*Math.PI),-.6154797086703873)}function y(e,t,n){return-t<1+e+n&&t-n-1<-e}function w(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=i+(s-i)*(e-t)/(n-t);if(!r)return o;if(s<i){if(o<s)return s;if(o>i)return i}else{if(o>s)return s;if(o<i)return i}return o}let k=e=>e*e,b=[0,.55,.85],g=[1,.18,.035];function _(e){let t=Math.cos(-(.25*Math.PI)),n=-.5773502691896257*Math.sin(-(.25*Math.PI));return new r.Pq0(Math.round(e.x/t),Math.round(-n*e.x/t/.816496580927726+e.y/.816496580927726),0)}function v(e,t){return Math.floor(Math.random()*(t-e+1))+e}class P{update(e){var t;if(!this.duration)return;this.t+=e;let n=this.t/this.duration;n=function(e){for(let t=0;t<3;t++)if(e<b[t])return 1-g[t-1]*(1-k(w(e,b[t-1],b[t],1==t?0:-1,1)));return 1-(1-Math.min(1,Math.max(0,k(w(e,b[2],1,-1,1)))))*g[2]}(n=(t=n)<.5?.5*Math.pow(2*t,2):1-.5*Math.pow(2*(1-t),2));let i=.57*this.cube_size,s=new r.kn4().identity();s.premultiply(this.action(n)),s.premultiply(u),s.premultiply(new r.kn4().makeTranslation(this.start_pos.x,this.start_pos.y,this.start_pos.z)),s.premultiply(new r.kn4().makeScale(i,i,i)),this.object.position.set(0,0,0),this.object.rotation.set(0,0,0),this.object.scale.set(1,1,1),this.object.applyMatrix4(s);let o=new r.Pq0().setFromMatrixScale(s);if(this.object.scale.set(o.x,o.y,o.z),this.points&&this.baseDotPositions){s.decompose(this._pos,this._quat,this._scl),this.points.position.copy(this._pos),this.points.quaternion.copy(this._quat),this.points.scale.set(1,1,1),this.points.position.z+=this.dotZBias;let e=this.baseDotPositions.length/3;for(let t=0;t<e;t++)this._dummy.position.set(this.baseDotPositions[3*t+0]*this._scl.x,this.baseDotPositions[3*t+1]*this._scl.y,this.baseDotPositions[3*t+2]*this._scl.z),this._dummy.rotation.set(0,0,0),this._dummy.scale.set(1,1,1),this._dummy.updateMatrix(),this.points.setMatrixAt(t,this._dummy.matrix);this.points.instanceMatrix.needsUpdate=!0}}getStartPos(){return new r.Pq0().copy(this.start_pos).multiplyScalar(this.cube_size)}getEndPos(){return new r.Pq0().applyMatrix4(this.action(1).premultiply(u)).add(this.start_pos).multiplyScalar(this.cube_size)}make_new_cube(e,t){if(this.t=0,this.cube_size=v(1,3),this.mvm=v(0,10),this.time_offset=v(0,1),this.duration=.08+.1*((this.cube_size-1)/4),this.points&&(this.points.geometry.dispose(),this.points=null),e){let t=.57*this.cube_size;this.start_pos=e.clone().multiplyScalar(1/Math.max(t,1e-6))}else{let e=function(e){let t=v(-e,e),n=v(-e,e);for(;!y(t,n,e);)t=v(-e,e),n=v(-e,e);var i=new r.I9Y(t,n);let s=Math.cos(-(.25*Math.PI*1)),o=-.5773502691896257*Math.sin(-(.25*Math.PI*1));return new r.Pq0(Math.round(s*i.x),Math.round(o*i.x-.816496580927726*i.y),0)}(Math.floor(.4*this.bg_grid_size)-1);this.start_pos=e}let n=_(this.getStartPos()),i=_(this.getEndPos());if(t&&t.length>0){for(let e of[n,i])for(let n of t)for(let t of[_(n.getStartPos()),_(n.getEndPos())])for(let i=-this.cube_size;i<this.cube_size+1;i++)for(let s=-this.cube_size;s<this.cube_size+1;s++)if(y(i,s,this.cube_size-1)&&y(i-e.x+t.x,s-e.y+t.y,n.cube_size))return!1}let s=[];for(let e=0;e<=this.cube_size;e++)for(let t=0;t<=this.cube_size;t++)for(let n=0;n<=this.cube_size;n++)Math.min(e,t,n)>0&&Math.max(e,t,n)<this.cube_size||s.push(e/this.cube_size-.5,t/this.cube_size-.5,n/this.cube_size-.5);this.baseDotPositions=new Float32Array(s);let o=s.length/3,l=new r.ZLX(a,m,o);for(let e=0;e<o;e++){let t=s[3*e+0],n=s[3*e+1],i=s[3*e+2];this._dummy.position.set(t,n,i),this._dummy.rotation.set(0,0,0),this._dummy.scale.set(1,1,1),this._dummy.updateMatrix(),l.setMatrixAt(e,this._dummy.matrix)}return l.instanceMatrix.needsUpdate=!0,l.instanceMatrix.setUsage(r.Vnu),l.renderOrder=999,l.frustumCulled=!1,this.points=l,this.update(0),!0}action(e){let t=new r.kn4().identity();switch(this.mvm){case 0:t.premultiply(new r.kn4().makeTranslation(-.5,.5,0)),t.premultiply(new r.kn4().makeRotationZ(-(.5*Math.PI)*e)),t.premultiply(new r.kn4().makeTranslation(.5,-.5,0));break;case 1:t.premultiply(new r.kn4().makeTranslation(0,.5,-.5)),t.premultiply(new r.kn4().makeRotationX(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(0,-.5,.5));break;case 2:t.premultiply(new r.kn4().makeTranslation(.5,.5,0)),t.premultiply(new r.kn4().makeRotationZ(-(.5*Math.PI)*e)),t.premultiply(new r.kn4().makeTranslation(-.5,-.5,0));break;case 3:t.premultiply(new r.kn4().makeTranslation(0,.5,.5)),t.premultiply(new r.kn4().makeRotationX(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(0,-.5,-.5));break;case 4:t.premultiply(new r.kn4().makeTranslation(-.5,0,.5)),t.premultiply(new r.kn4().makeRotationY(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(.5,0,-.5));break;case 5:t.premultiply(new r.kn4().makeTranslation(.5,0,-.5)),t.premultiply(new r.kn4().makeRotationY(-(.5*Math.PI)*e)),t.premultiply(new r.kn4().makeTranslation(-.5,0,.5));break;case 6:case 7:t.premultiply(new r.kn4().makeTranslation(.5,0,.5)),t.premultiply(new r.kn4().makeRotationY(.5*Math.PI*e)),t.premultiply(new r.kn4().makeTranslation(-.5,0,-.5));break;case 8:t.premultiply(new r.kn4().makeTranslation(.5,0,0)),t.premultiply(new r.kn4().makeScale(e,1,1)),t.premultiply(new r.kn4().makeTranslation(-.5,0,0));break;case 9:t.premultiply(new r.kn4().makeTranslation(0,0,.5)),t.premultiply(new r.kn4().makeScale(1,1,e)),t.premultiply(new r.kn4().makeTranslation(0,0,-.5));break;case 10:t.premultiply(new r.kn4().makeTranslation(0,.5,0)),t.premultiply(new r.kn4().makeScale(1,e,1)),t.premultiply(new r.kn4().makeTranslation(0,-.5,0))}return t}constructor(e){this.t=0,this.bg_grid_size=5,this.squish=.5,this.dotZBias=.1,this.points=null,this.baseDotPositions=null,this._dummy=new r.B69,this._pos=new r.Pq0,this._quat=new r.PTz,this._scl=new r.Pq0;let t=new r.iNn(1,1,1);this.object=new r.eaF(t,c),this.object.position.set(0,0,0),this.object.userData={cube:this}}}var x=n(3265);function M(){let e=(0,s.useRef)(null),{resolved_theme:t}=(0,x.w)();return(0,s.useEffect)(()=>{let t=e.current,n=new r.Z58,i=new r.qUd(-3,3,3,-3,-100,100);i.position.set(0,0,10),i.lookAt(0,0,0);let s=new o.JeP({antialias:!0,powerPreference:"low-power",preserveDrawingBuffer:!1,alpha:!0});s.setPixelRatio(q()),s.domElement.style.display="block",s.domElement.style.width="100%",s.domElement.style.height="100%",t.appendChild(s.domElement),h();let l=null;function u(e){let t=p(d(e,.6154797086703873),-(.25*Math.PI)).multiplyScalar(1.7543859649122808);t.x=Math.round(t.x),t.y=Math.round(t.y),t.z=Math.round(t.z);let n=f(t);return n.z=0,n}let w=[];for(let e=-24;e<25;e++)for(let t=-24;t<25;t++)if(y(e,t,24)){let n=f(new r.Pq0(e,0,t));w.push(n.x,n.y,-50)}l=new r.ZLX(a,m,w.length/3);let k=new r.B69;for(let e=0;e<w.length;e+=3)k.position.set(w[e+0],w[e+1],w[e+2]),k.updateMatrix(),l.setMatrixAt(e/3,k.matrix);l.instanceMatrix.needsUpdate=!0,n.add(l);let b=[],g=!1,_=new r.tBo,v=new r.I9Y,x=new r.Zcv(new r.Pq0(0,0,1),0),M=new r.Pq0;function E(e){let t=s.domElement.getBoundingClientRect();return v.x=(e.clientX-t.left)/t.width*2-1,v.y=-(2*((e.clientY-t.top)/t.height))+1,_.setFromCamera(v,i),_.ray.intersectPlane(x,M),M.clone()}function T(e){return e.x>=i.left&&e.x<=i.right&&e.y>=i.bottom&&e.y<=i.top}function z(e){if(b.length>=4)return;let t=new P(n);t.bg_grid_size=5,t.make_new_cube(e,b)&&(t.object&&n.add(t.object),t.points&&n.add(t.points),b.push(t))}function S(e){if(!g)return;let t=E(e);if(!T(t))return;let n=u(t);if(n){for(let e=0;e<4;e++)z(n);g=!1}}function C(e){if(console.log("pointer"),!g)return;let t=E(e);if(console.log(t),!T(t))return;let n=u(t);n&&(z(n),g=!1)}function q(){var e,t;let n=null!=(t=null==(e=window.visualViewport)?void 0:e.scale)?t:1;return(window.devicePixelRatio||1)*n}s.domElement.addEventListener("pointermove",S),s.domElement.addEventListener("pointerdown",C),z(new r.Pq0(0,0,0));let A=()=>{let e=t.clientWidth||300,n=t.clientHeight||300,r=q();s.setPixelRatio(r),s.setSize(e,n,!1);let o=e/n;i.left=-6*o/2,i.right=6*o/2,i.top=3,i.bottom=-3,i.updateProjectionMatrix()};window.addEventListener("resize",A),A();let I=0,j=performance.now(),L=e=>{I=requestAnimationFrame(L);let t=(e-j)/1e3*.1;j=e;for(let e=b.length-1;e>=0;e--){let i=b[e];i.update(t),i.t>=i.duration&&(i.points&&(n.remove(i.points),i.points.geometry.dispose(),i.points=null),n.remove(i.object),i.object.geometry.dispose(),b.splice(e,1))}g=b.length<4,s.render(n,i)};return L(j),()=>{for(let e of(cancelAnimationFrame(I),window.removeEventListener("resize",A),s.domElement.removeEventListener("pointermove",S),s.domElement.removeEventListener("pointerdown",C),t.removeChild(s.domElement),s.dispose(),b))e.points&&e.points.geometry.dispose(),e.object.geometry.dispose();l&&l.geometry.dispose(),c.dispose(),m.dispose()}},[]),(0,s.useEffect)(()=>{let e=requestAnimationFrame(()=>{h()});return()=>cancelAnimationFrame(e)},[t]),(0,i.jsx)("div",{ref:e,className:"absolute inset-0 overflow-hidden"})}},5379:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,N:()=>m});var i=n(2115),s=(e,t,n,i,s,r,o,a)=>{let l=document.documentElement,u=["light","dark"];function m(t){var n;(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,i=n&&r?s.map(e=>r[e]||e):s;n?(l.classList.remove(...i),l.classList.add(r&&r[t]?r[t]:t)):l.setAttribute(e,t)}),n=t,a&&u.includes(n)&&(l.style.colorScheme=n)}if(i)m(i);else try{let e=localStorage.getItem(t)||n,i=o&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;m(i)}catch(e){}},r=["light","dark"],o="(prefers-color-scheme: dark)",a=i.createContext(void 0),l={setTheme:e=>{},themes:[]},u=()=>{var e;return null!=(e=i.useContext(a))?e:l},m=e=>i.useContext(a)?i.createElement(i.Fragment,null,e.children):i.createElement(h,{...e}),c=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:s=!0,enableColorScheme:l=!0,storageKey:u="theme",themes:m=c,defaultTheme:h=s?"system":"light",attribute:w="data-theme",value:k,children:b,nonce:g,scriptProps:_}=e,[v,P]=i.useState(()=>p(u,h)),[x,M]=i.useState(()=>"system"===v?y():v),E=k?Object.values(k):m,T=i.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=y());let i=k?k[t]:t,o=n?f(g):null,a=document.documentElement,u=e=>{"class"===e?(a.classList.remove(...E),i&&a.classList.add(i)):e.startsWith("data-")&&(i?a.setAttribute(e,i):a.removeAttribute(e))};if(Array.isArray(w)?w.forEach(u):u(w),l){let e=r.includes(h)?h:null,n=r.includes(t)?t:e;a.style.colorScheme=n}null==o||o()},[g]),z=i.useCallback(e=>{let t="function"==typeof e?e(v):e;P(t);try{localStorage.setItem(u,t)}catch(e){}},[v]),S=i.useCallback(e=>{M(y(e)),"system"===v&&s&&!t&&T("system")},[v,t]);i.useEffect(()=>{let e=window.matchMedia(o);return e.addListener(S),S(e),()=>e.removeListener(S)},[S]),i.useEffect(()=>{let e=e=>{e.key===u&&(e.newValue?P(e.newValue):z(h))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[z]),i.useEffect(()=>{T(null!=t?t:v)},[t,v]);let C=i.useMemo(()=>({theme:v,setTheme:z,forcedTheme:t,resolvedTheme:"system"===v?x:v,themes:s?[...m,"system"]:m,systemTheme:s?x:void 0}),[v,z,t,x,s,m]);return i.createElement(a.Provider,{value:C},i.createElement(d,{forcedTheme:t,storageKey:u,attribute:w,enableSystem:s,enableColorScheme:l,defaultTheme:h,value:k,themes:m,nonce:g,scriptProps:_}),b)},d=i.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:r,enableSystem:o,enableColorScheme:a,defaultTheme:l,value:u,themes:m,nonce:c,scriptProps:h}=e,d=JSON.stringify([r,n,l,t,m,u,o,a]).slice(1,-1);return i.createElement("script",{...h,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(d,")")}})}),p=(e,t)=>{let n;try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(o)),e.matches?"dark":"light")},6174:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});var i=n(5155),s=n(2115);function r(e){let{src:t="/tiles/tile.png",className:n,lock_viewport:r=!1}=e,o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=o.current,n=new Image;n.src=t;let i=()=>{let t=window.devicePixelRatio||1;if(n.naturalWidth&&n.naturalHeight){let i=n.naturalWidth/t,s=n.naturalHeight/t;e.style.backgroundSize="".concat(i,"px ").concat(s,"px")}r&&(e.style.height="".concat(window.screen.height,"px")),e.style.animationPlayState="running"};return n.complete?i():n.onload=i,window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[t,r]),(0,i.jsx)("div",{ref:o,className:"tiled-bg fixed inset-0 -z-10 pointer-events-none ".concat(null!=n?n:"")})}},8514:(e,t,n)=>{Promise.resolve().then(n.bind(n,3291)),Promise.resolve().then(n.bind(n,6174))}},e=>{e.O(0,[367,831,441,255,358],()=>e(e.s=8514)),_N_E=e.O()}]);